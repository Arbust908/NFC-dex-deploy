import{d as k,r as m,j as N,o as p,b as u,h as r,t as d,m as P,F as R,z as $,v as C,x as E}from"./vendor.5e53ca0f.js";import{_ as F}from"./app.b20dc015.js";const S=l=>(C("data-v-6ccf5e42"),l=l(),E(),l),I=S(()=>r("p",{class:"text-4xl mb-8"},[r("strong",{class:"font-bold"},"NFC"),r("span",{class:"text-2xl"},"Dex")],-1)),A={key:0,class:"flex justify-center items-center gap-4 flex-wrap"},D={key:1},T={class:"text-sm opacity-75"},O={class:"m-4"},j={class:"grid gap-4 max-w-2xl mx-auto dex-grid"},J={class:"rounded-full p-2 text-xs opacity-50"},B=["src"],L=["onClick"],M=k({setup(l){const o=m([]),c=[{name:"Bulbasaur",id:1,img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/1.png",type:"grass"},{name:"Charmander",id:4,img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/4.png",type:"fire"},{name:"Squirtle",id:7,img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/7.png",type:"water"},{name:"Pikachu",id:25,img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png",type:"electric"},{name:"Eevee",id:133,img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/133.png",type:"normal"},{name:"Jigglypuff",id:39,img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/39.png",type:"normal"},{name:"Mew",id:151,img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/151.png",type:"psychic"},{name:"Mewtwo",id:150,img:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/150.png",type:"psychic"}],g=m(!0),e=m(""),v=a=>o.value.find(t=>t.id===a);typeof window!="undefined"&&window&&"NDEFReader"in window&&(g.value=!0,console.log(window.NDEFReader));const i=a=>new Promise(s=>setTimeout(s,a)),w=async()=>{e.value="Preparing to write";try{const a=new NDEFReader,s=new TextEncoder;e.value=o.value,await i(2500),e.value=JSON.stringify({dex:o.value}),await i(2500);const t=[{recordType:"mime",mediaType:"application/json",data:s.encode(JSON.stringify({name:c[0].name,id:c[0].id,img:c[0].img,type:c[0].type}))}];e.value=t,await i(2500),await a.write({records:t},{overwrite:!0}),e.value=`Wrote -${t}`}catch(a){e.value=`ERROR:::${a}`}},y=async()=>{e.value="Preparing to write";try{const a=new NDEFReader,s=new TextEncoder;e.value=o.value,await i(2500),e.value=JSON.stringify({dex:o.value}),await i(2500);const t=[{recordType:"mime",mediaType:"application/json",data:s.encode(JSON.stringify({dex:o.value}))}];e.value=t,await i(2500),await a.write({records:t},{overwrite:!0}),e.value=`Wrote -${t}`}catch(a){e.value=`ERROR:::${a}`}},x=async()=>{try{const a=new NDEFReader;await a.scan(),e.value="Scaning...",a.addEventListener("reading",({message:s,serialNumber:t})=>{e.value=`${t}: ${JSON.stringify(s.records,null,2)}`})}catch(a){e.value=`Error! Scan failed to start: ${a}.`}},f=async()=>{const a=new TextDecoder;e.value="Scaning...";const s=new NDEFReader;await s.scan(),s.addEventListener("reading",({message:t,serialNumber:_})=>{for(const n of t.records)switch(e.value="--------",e.value+=n.recordType,e.value+=`
      -
      `,n.recordType){case"text":e.value+=`Text: ${a.decode(n.data)} (${n.lang})`;break;case"url":e.value+=`URL: ${a.decode(n.data)}`;break;case"mime":n.mediaType==="application/json"?e.value+=`JSON: ${a.decode(n.data)}`:e.value+="Media not handled";break;default:e.value+="Record not handled"}})},{t:h}=N(),b=a=>{o.value.push(a),console.log(`Added ${a.name}`),console.log("Your Dex"),console.log(o.value)};return(a,s)=>(p(),u("div",null,[I,g.value?(p(),u("div",A,[r("button",{class:"rounded border px-6 py-2",onClick:s[0]||(s[0]=t=>y())}," Write "),r("button",{class:"rounded border px-6 py-2",onClick:s[1]||(s[1]=t=>w())}," Buba! "),r("button",{class:"rounded border px-6 py-2",onClick:s[2]||(s[2]=t=>x())}," Read "),r("button",{class:"rounded border px-6 py-2",onClick:s[3]||(s[3]=t=>f())}," Read All ")])):(p(),u("div",D,[r("em",T,d(P(h)("no-nfc")),1)])),r("div",O,d(e.value),1),r("section",j,[(p(),u(R,null,$(c,t=>r("article",{key:t.id,class:"bg-gray-200 dark:bg-gray-800 rounded"},[r("small",J,d(v(t.id)?"Owned":null)+" "+d(t.id),1),r("h2",null,d(t.name),1),r("img",{class:"w-24 h-24 mx-auto",src:t.img,alt:"{{ pokemon.name }}"},null,8,B),r("p",null,d(t.type),1),r("button",{class:"rounded-full bg-red-600 text-white border-2 border-white hover:shadow hover:bg-red-400 px-3 py-1 my-2",onClick:_=>b(t)}," Add to Dex ",8,L)])),64))])]))}});var q=F(M,[["__scopeId","data-v-6ccf5e42"]]);export{q as default};
